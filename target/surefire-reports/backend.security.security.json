[{"line":2,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url securityUrl","result":{"duration":127653,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6},{"name":"def resultContract = callonce read('..\/..\/claroApp\/user\/contractlist.feature@list')","result":{"duration":5082326416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7,"doc_string":{"content_type":"","value":"13:07:23.920 >> lock acquired, begin callonce: read('..\/..\/claroApp\/user\/contractlist.feature@list')\n13:07:29.001 << lock released, cached callonce: read('..\/..\/claroApp\/user\/contractlist.feature@list')","line":7}},{"name":"..\/..\/claroApp\/user\/contractlist.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":7},{"name":"def result = callonce read('..\/..\/claroApp\/authentication\/signin.feature@login')","result":{"duration":1601285641,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"13:07:23.943 scenario called at line: 14 by tag: @list\n13:07:23.950 >> lock acquired, begin callonce: read('..\/..\/claroApp\/authentication\/signin.feature@login')\n13:07:25.551 << lock released, cached callonce: read('..\/..\/claroApp\/authentication\/signin.feature@login')","line":5}},{"name":"..\/..\/claroApp\/authentication\/signin.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":5},{"name":"header Content-Type = 'application\/json'","result":{"duration":6810557,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":5,"doc_string":{"content_type":"","value":"13:07:23.976 scenario called at line: 12 by tag: @login","line":5}},{"name":"header x-application-key = xappkey","result":{"duration":53238,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":6},{"name":"header gw-app-key = gwappkey","result":{"duration":35166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":7},{"name":"header Cache-Control = 'no-cache'","result":{"duration":8832183,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":8},{"name":"url authenticationUrl","result":{"duration":48219,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":9},{"name":"def body =","result":{"duration":50327106,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":14,"doc_string":{"content_type":"","value":"{\n    \"username\": \"<username>\",\n    \"password\": \"<password>\"\n}","line":14}},{"name":"replace body.username = username","result":{"duration":456888,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":22},{"name":"replace body.password = password","result":{"duration":38894,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":23},{"name":"def responseApi =","result":{"duration":195284,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":25,"doc_string":{"content_type":"","value":"{\n  userInfo: '#string',\n  idmToken: '#string',\n  idmSID: '#string'\n}","line":25}},{"name":"path 'sign-in'","result":{"duration":15875695,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> Given","line":33},{"name":"request body","result":{"duration":57061,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> And","line":34},{"name":"method post","result":{"duration":1452805816,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> When","line":35,"doc_string":{"content_type":"","value":"13:07:24.367 request:\n1 > POST https:\/\/dev-gw.claro.com.br\/authentication\/v1\/sign-in\n1 > Accept-Encoding: gzip,deflate\n1 > Cache-Control: no-cache\n1 > Connection: Keep-Alive\n1 > Content-Length: 48\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: dev-gw.claro.com.br\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/11.0.2)\n1 > gw-app-key: e9e24b40c78e013762d7000d3ac06d76\n1 > x-application-key: 2251d8c0a94601364c54000d3ac06d76\n{\"username\":\"46168907734\",\"password\":\"@Nowauto\"}\n\n13:07:25.519 response time in milliseconds: 1143,87\n1 < 200\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Server: ECD (spb\/E517)\n1 < Transfer-Encoding: chunked\n1 < X-Policy: 200205-02\n1 < cache-control: no-store, max-age=0\n1 < date: Mon, 10 Feb 2020 15:07:25 GMT\n1 < strict-transport-security: max-age=15768000\n1 < vary: accept-encoding\n1 < x-content-type-options: nosniff\n1 < x-download-options: noopen\n1 < x-frame-options: DENY\n1 < x-request-id: 1ace3d0b34f297c017487f1268eab0788ffd12fa82c8de30bb61799602e593ca\n1 < x-xss-protection: 1; mode=block\n{\"userInfo\":\"0eD997s4wsJwG1uvOJ9m0YgLfDbC3Qh8+Gtt\/3Mam1DSnkHZ0sur3Lr9Ps+qu4mQVjm4wk3+qPc7alSL9iycCnzgVWwC7fOKt64Rf78hG40ci8iOP68qArbGduOmhmXoS92Ce5+omhM3XHFjUWYs8J+1SlP6E8tzgjcxwU9Iaxjj+N8GmLwDu5VDy505qqV5WzvHRmG2MODnDhC2U\/Tvpcp1UgW8awzVttSInkGPAajUJ1DMGR\/ZvvZXsVRYuiogGx+1Gx399Pcxzor\/M+jNJVAzJQM+Kv3kamFYpSloxw+bDTpJbw208SmPTsTZTN7FsnekPqkEUtyOkJ10Mlb+88l3WWjtIy8JU6djGgdY\/kPmQpbS5obFLsXwtz\/PI5lPwDb5im8VQ+ErND6aYjJDnfjq2SZBrQWZOD+bauaFGNY3IeOaZw08Or\/495EscguYTnMlSwCoccAKLWzNcIgXgA==\",\"idmToken\":\"86c51b61cf8e3705\",\"idmSID\":\"85d5809cb3bfee4\"}","line":35}},{"name":"status 200","result":{"duration":32968,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> Then","line":36},{"name":"match response == responseApi","result":{"duration":1360918,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> And","line":37},{"name":"def idmToken = response.idmToken","result":{"duration":12551246,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> And","line":38},{"name":"def userInfo = response.userInfo","result":{"duration":3725349,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> And","line":39},{"name":"def idmSID = response.idmSID","result":{"duration":3930067,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> And","line":40},{"name":"header Content-Type = 'application\/json'","result":{"duration":141016,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":6},{"name":"header userInfo = java.net.URLEncoder.encode(result.userInfo, 'UTF-8')","result":{"duration":38662100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":7},{"name":"header x-application-key = xappkey","result":{"duration":187146,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":8},{"name":"header gw-app-key = gwappkey","result":{"duration":27802,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9},{"name":"header Cache-Control = 'no-cache'","result":{"duration":329484,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":10},{"name":"url userUrl","result":{"duration":21979,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":11},{"name":"def responseApi =","result":{"duration":190960,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":16,"doc_string":{"content_type":"","value":"{\n  contracts: '#[]? _.length == 4'\n}","line":16}},{"name":"path 'contract'","result":{"duration":4723766,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":22},{"name":"request {}","result":{"duration":126502,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":23},{"name":"method get","result":{"duration":3352966317,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":24,"doc_string":{"content_type":"","value":"13:07:25.598 request:\n1 > GET https:\/\/dev-gw.claro.com.br\/user\/v1\/contract\n1 > Accept-Encoding: gzip,deflate\n1 > Cache-Control: no-cache\n1 > Connection: Keep-Alive\n1 > Content-Type: application\/json\n1 > Host: dev-gw.claro.com.br\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/11.0.2)\n1 > gw-app-key: e9e24b40c78e013762d7000d3ac06d76\n1 > userInfo: 0eD997s4wsJwG1uvOJ9m0YgLfDbC3Qh8%2BGtt%2F3Mam1DSnkHZ0sur3Lr9Ps%2Bqu4mQVjm4wk3%2BqPc7alSL9iycCnzgVWwC7fOKt64Rf78hG40ci8iOP68qArbGduOmhmXoS92Ce5%2BomhM3XHFjUWYs8J%2B1SlP6E8tzgjcxwU9Iaxjj%2BN8GmLwDu5VDy505qqV5WzvHRmG2MODnDhC2U%2FTvpcp1UgW8awzVttSInkGPAajUJ1DMGR%2FZvvZXsVRYuiogGx%2B1Gx399Pcxzor%2FM%2BjNJVAzJQM%2BKv3kamFYpSloxw%2BbDTpJbw208SmPTsTZTN7FsnekPqkEUtyOkJ10Mlb%2B88l3WWjtIy8JU6djGgdY%2FkPmQpbS5obFLsXwtz%2FPI5lPwDb5im8VQ%2BErND6aYjJDnfjq2SZBrQWZOD%2BbauaFGNY3IeOaZw08Or%2F495EscguYTnMlSwCoccAKLWzNcIgXgA%3D%3D\n1 > x-application-key: 2251d8c0a94601364c54000d3ac06d76\n\n13:07:28.949 response time in milliseconds: 3346,49\n1 < 200\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Server: ECD (spb\/E4A2)\n1 < Transfer-Encoding: chunked\n1 < X-Policy: 200205-02\n1 < cache-control: public, max-age=21600\n1 < date: Mon, 10 Feb 2020 15:07:29 GMT\n1 < strict-transport-security: max-age=15768000\n1 < vary: accept-encoding\n1 < x-cache: MISS\n1 < x-content-type-options: nosniff\n1 < x-download-options: noopen\n1 < x-frame-options: DENY\n1 < x-request-id: 50e17be8c3c96b8c17ecb0a820dddd8aaa49e8f4f8b4cca10c627637b3fc22e3\n1 < x-xss-protection: 1; mode=block\n{\"contracts\":[{\"contractNumber\":\"112778101\",\"operatorCode\":\"003\",\"addresses\":[],\"customerUno\":false}]}","line":24}},{"name":"status 200","result":{"duration":33507,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":25},{"name":"match response == responseApi","result":{"duration":24094346,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":26},{"name":"def contractnumber = response.contracts[0].contractNumber","result":{"duration":16082624,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":27},{"name":"def operatorcode = response.contracts[0].operatorCode","result":{"duration":6811291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":28},{"name":"def userinfo = result.userInfo","result":{"duration":3411132,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":29},{"name":"def decodejwt =","result":{"duration":4282532,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8,"doc_string":{"content_type":"","value":"function(token) {\n    var cl = Java.type('backend.DecodeJWT');\n    var ff = new cl();\n    return [ff.getContract(token), ff.getOperatorCode(token), ff.getPartner(token)];\n}","line":8}}]},{"line":18,"name":"Validar token de usuários SMS","description":"","id":"validar-token-de-usuários-sms","type":"scenario","keyword":"Scenario","steps":[{"name":"def responseApi =","result":{"duration":156369,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":21,"doc_string":{"content_type":"","value":"{\n    token:'#string'\n}","line":21}},{"name":"headers { contract-number: '#(resultContract.contractnumber)', operator-code: '#(resultContract.operatorcode)', partner-account: '#(partneraccount)', user-info: '#(resultContract.userinfo)', x-application-key: '#(xappkey)' }","result":{"duration":23059987,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":27},{"name":"path 'generate-token-by-userinfo\/sms'","result":{"duration":3292864,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":28},{"name":"request {}","result":{"duration":119307,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":29},{"name":"method get","result":{"duration":6094563837,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":30,"doc_string":{"content_type":"","value":"13:07:29.035 request:\n1 > GET https:\/\/dev-gw.claro.com.br\/security\/v1\/generate-token-by-userinfo\/sms\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Host: dev-gw.claro.com.br\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/11.0.2)\n1 > contract-number: 112778101\n1 > operator-code: 003\n1 > partner-account: NETAPPNOVO\n1 > user-info: 0eD997s4wsJwG1uvOJ9m0YgLfDbC3Qh8+Gtt\/3Mam1DSnkHZ0sur3Lr9Ps+qu4mQVjm4wk3+qPc7alSL9iycCnzgVWwC7fOKt64Rf78hG40ci8iOP68qArbGduOmhmXoS92Ce5+omhM3XHFjUWYs8J+1SlP6E8tzgjcxwU9Iaxjj+N8GmLwDu5VDy505qqV5WzvHRmG2MODnDhC2U\/Tvpcp1UgW8awzVttSInkGPAajUJ1DMGR\/ZvvZXsVRYuiogGx+1Gx399Pcxzor\/M+jNJVAzJQM+Kv3kamFYpSloxw+bDTpJbw208SmPTsTZTN7FsnekPqkEUtyOkJ10Mlb+88l3WWjtIy8JU6djGgdY\/kPmQpbS5obFLsXwtz\/PI5lPwDb5im8VQ+ErND6aYjJDnfjq2SZBrQWZOD+bauaFGNY3IeOaZw08Or\/495EscguYTnMlSwCoccAKLWzNcIgXgA==\n1 > x-application-key: 2251d8c0a94601364c54000d3ac06d76\n\n13:07:35.127 response time in milliseconds: 6088,99\n1 < 200\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json;charset=utf-8\n1 < Server: ECD (spb\/E563)\n1 < Transfer-Encoding: chunked\n1 < X-Policy: 200205-02\n1 < cache-control: public, max-age=18000\n1 < date: Mon, 10 Feb 2020 15:07:35 GMT\n1 < strict-transport-security: max-age=15768000\n1 < vary: Accept-Encoding, User-Agent,accept-encoding\n1 < x-cache: MISS\n1 < x-content-type-options: nosniff\n1 < x-download-options: noopen\n1 < x-frame-options: DENY\n1 < x-request-id: 62e8034bd98adf377a8663b4f8c3a8ff6bd17acec2c7a9a1793f5ccac9ae2f46\n1 < x-xss-protection: 1; mode=block\n{\"token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmb3JtYVBhZ2FtZW50byI6IkRFQklUTyBFTSBDT05UQSIsInJvbGUiOiJVU0VSIiwiY29kaWdvT3BlcmFkb3JhIjoiMDAzIiwidHZEaWdpdGFsIjp0cnVlLCJsb2dpbiI6IjQ2MTY4OTA3NzM0IiwiZGlhVmVuY2ltZW50byI6MTAsInBhcnRuZXJBY2NvdW50IjoiTkVUQVBQTk9WTyIsImNvZGlnb05ldCI6IjAwMzExMjc3ODEwMSIsInBlcmZpbENsaWVudGUiOjI2OTAsImNwZiI6IjQ2MTY4OTA3NzM0IiwidGlwb0NvbnRyYXRvIjoxLCJjdXN0b21lck5ldFVubyI6ZmFsc2UsImV4cCI6MTU4MTM2ODg1NSwiZGF0YUNhZGFzdHJvIjo4MTA4NjQwMDAwMDAsImVtYWlsIjoiam9zZWF1Z3VzdG9wZXJyb3R0YUBnbWFpbC5jb20iLCJzZWdtZW50b0NsaWVudGUiOiJQVVJQTEUiLCJzdGF0dXNDb250cmF0byI6IjEiLCJ0aXBvU2VnbWVudG9DbGllbnRlIjoiMTAiLCJjb250cmF0byI6IjExMjc3ODEwMSIsIm5vbWUiOiJKT1NFIEFVR1VTVE8gUEVSUk9UVEEiLCJzdGF0dXNBZGltcGwiOiJ0cnVlIiwibm9kZSI6IkJVVEpBIiwidHZBbmFsb2dpYyI6ZmFsc2UsInBob25lIjp0cnVlLCJicm9hZGJhbmQiOnRydWUsImNvZENpZGFkZU5ldCI6Ijg4NDEyIiwiY29kaWdvSW1vdmVsIjo1MDAwMjA4NzcsInN0YXR1c0NvbnRyYXRvRGVzY3JpY2FvIjoiQ09ORUNUQURPIiwic3JzY2FpZHN0YXR1cyI6MX0.mgrM59NukEE6FfBniMDlA1OE2b663Ix22hh9ye3lCNY\"}","line":30}},{"name":"status 200","result":{"duration":31124,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":31},{"name":"match response == responseApi","result":{"duration":422883,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":32},{"name":"def wcp = response.token","result":{"duration":6142011,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":33},{"name":"match contractnumber == decodejwt(wcp)[0]","result":{"duration":323995979,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":34},{"name":"match operatorcode == decodejwt(wcp)[1]","result":{"duration":15063531,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":35},{"name":"match partneraccount == decodejwt(wcp)[2]","result":{"duration":12828514,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":36}],"tags":[{"name":"@smstoken","line":17}]}],"name":"backend\/security\/security.feature","description":"Geração do WCP token","id":"geração-do-wcp-token","keyword":"Feature","uri":"backend\/security\/security.feature","tags":[{"name":"@all","line":1}]}]